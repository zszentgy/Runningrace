package com.runningrace.model;

import lombok.Data;

import com.fasterxml.jackson.annotation.JsonBackReference;
import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.annotation.JsonProperty;

import jakarta.persistence.*;

@Data
@Entity
public class Result {

    @Id
    @JsonIgnore
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @ManyToOne
    @JoinColumn(name = "runner_id")
    @JsonBackReference
    @JsonIgnore
    private Runner runner; // Links to the Runner entity

    @ManyToOne
    @JoinColumn(name = "race_id")
    @JsonBackReference
    private Race race; // Links to the Race entity

    private int timeResult; // Time result of the runner in minutes

    // Default constructor
    public Result() {
    }

    // Parameterized constructor to create a result with specific runner, race, and time
    public Result(Runner runner, Race race, int timeResult) {
        this.runner = runner;
        this.race = race;
        this.timeResult = timeResult;
    }

    @JsonProperty("runnerName")
    public String getRunnerName() {
        return runner.getName();
    }

    // Getters and setters, toString, equals, and hashCode methods are generated by Lombok

}
